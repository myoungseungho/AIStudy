<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>합성곱(Convolution)이 뭐야? - Section 5</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #fafafa;
            color: #333;
            line-height: 1.9;
        }
        .container { max-width: 800px; margin: 0 auto; padding: 60px 20px; }
        .breadcrumb { margin-bottom: 24px; font-size: 0.9rem; }
        .breadcrumb a { color: #666; text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: #999; margin: 0 8px; }
        .header { margin-bottom: 48px; }
        .topic-number {
            display: inline-block;
            background: #00BCD4;
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 16px;
        }
        .header h1 { font-size: 2rem; font-weight: 700; color: #111; margin-bottom: 12px; }
        .header p { color: #666; font-size: 1.1rem; }
        .conversation {
            background: white;
            border-radius: 16px;
            padding: 32px;
            margin: 32px 0;
            border: 1px solid #e0e0e0;
        }
        .conversation h2 {
            font-size: 1.3rem;
            color: #00BCD4;
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e0f7fa;
        }
        .chat { margin-bottom: 20px; }
        .q {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 16px 20px;
            margin: 16px 0;
            border-radius: 0 12px 12px 0;
            font-weight: 500;
        }
        .q::before { content: "Q. "; color: #e65100; font-weight: 700; }
        .a {
            padding: 8px 0 8px 20px;
            border-left: 4px solid #e0e0e0;
            margin: 12px 0;
        }
        .a p { margin-bottom: 12px; }
        .a p:last-child { margin-bottom: 0; }
        .highlight {
            background: #e3f2fd;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: #1565c0;
        }
        .key-point {
            background: #e0f7fa;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: #00838f;
        }
        .warning {
            background: #ffcdd2;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            color: #c62828;
        }
        .code-block {
            background: #263238;
            border-radius: 8px;
            padding: 16px 20px;
            margin: 16px 0;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            color: #eceff1;
            overflow-x: auto;
            line-height: 1.6;
            white-space: pre-wrap;
        }
        .compare-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 0.9rem;
        }
        .compare-table th, .compare-table td {
            padding: 12px;
            border: 1px solid #e0e0e0;
            text-align: left;
        }
        .compare-table th { background: #f5f5f5; font-weight: 600; }
        .summary-box {
            background: linear-gradient(135deg, #00BCD4 0%, #26C6DA 100%);
            border-radius: 16px;
            padding: 32px;
            color: white;
            margin: 32px 0;
        }
        .summary-box h3 { font-size: 1.2rem; margin-bottom: 20px; }
        .summary-box ul { list-style: none; }
        .summary-box li {
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
        }
        .summary-box li::before {
            content: "→";
            position: absolute;
            left: 0;
            color: #b2ebf2;
        }
        .nav-links {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            padding-top: 24px;
            border-top: 1px solid #e0e0e0;
        }
        .nav-links a { color: #00BCD4; text-decoration: none; font-weight: 500; }
        .nav-links a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="../../">AI 공부</a>
            <span>/</span>
            <a href="../">Section 5</a>
            <span>/</span>
            Topic 04
        </nav>

        <header class="header">
            <div class="topic-number">TOPIC 04</div>
            <h1>합성곱(Convolution)이 뭐야?</h1>
            <p>Q. 필터를 밀면서 곱한다는 게 뭐야?</p>
        </header>

        <!-- Part 1: 합성곱의 개념 -->
        <div class="conversation">
            <h2>Part 1. 합성곱이 뭐길래?</h2>

            <div class="chat">
                <div class="q">Convolution, 합성곱이 뭐야? 왜 이름이 이렇게 어려워?</div>
                <div class="a">
                    <p>이름은 어렵지만 개념은 간단해.</p>
                    <p><span class="key-point">작은 창문을 이미지 위에 슬라이딩하면서 계산하는 거야.</span></p>
                </div>
            </div>

            <div class="code-block">비유:
돋보기로 신문을 읽는다고 생각해봐.

1. 돋보기를 왼쪽 위에 놓고 → 읽기
2. 조금 오른쪽으로 이동 → 읽기
3. 끝까지 가면 한 줄 아래로 → 읽기
4. 다시 왼쪽부터 시작

합성곱도 똑같아.
→ 작은 필터(돋보기)를 이미지 위에서 슬라이딩
→ 각 위치에서 계산 수행
→ 결과를 새로운 이미지로 만듦</div>

            <div class="chat">
                <div class="a">
                    <p>이해됐어?</p>
                    <p><span class="highlight">핵심은 "국소적으로 보면서 특징을 추출"하는 거야.</span></p>
                </div>
            </div>
        </div>

        <!-- Part 2: 실제 계산 -->
        <div class="conversation">
            <h2>Part 2. 실제로 어떻게 계산해?</h2>

            <div class="chat">
                <div class="q">구체적인 예시를 보여줘</div>
                <div class="a">
                    <p>간단한 예를 들어볼게. 5×5 이미지에 3×3 필터를 적용한다고 하자.</p>
                </div>
            </div>

            <div class="code-block">입력 이미지 (5×5):
[
  [1, 2, 3, 4, 5],
  [6, 7, 8, 9, 10],
  [11, 12, 13, 14, 15],
  [16, 17, 18, 19, 20],
  [21, 22, 23, 24, 25]
]


필터 (3×3):
[
  [1, 0, -1],
  [1, 0, -1],
  [1, 0, -1]
]


Step 1: 필터를 왼쪽 위에 놓기
[1, 2, 3]
[6, 7, 8]      × 필터
[11, 12, 13]

계산:
1×1 + 2×0 + 3×(-1) +
6×1 + 7×0 + 8×(-1) +
11×1 + 12×0 + 13×(-1)
= 1 + 0 - 3 + 6 + 0 - 8 + 11 + 0 - 13
= -6


Step 2: 필터를 오른쪽으로 한 칸 이동
[2, 3, 4]
[7, 8, 9]      × 필터
[12, 13, 14]

계산:
2×1 + 3×0 + 4×(-1) + ...
= -6

...계속 반복</div>

            <div class="chat">
                <div class="a">
                    <p>이 과정을 끝까지 반복하면 <strong>새로운 이미지</strong>가 나와.</p>
                    <p>이걸 <span class="key-point">"특징 맵(Feature Map)"</span>이라고 불러.</p>
                </div>
            </div>
        </div>

        <!-- Part 3: 필터의 역할 -->
        <div class="conversation">
            <h2>Part 3. 필터는 뭘 하는 거야?</h2>

            <div class="chat">
                <div class="q">필터에 따라 결과가 달라져?</div>
                <div class="a">
                    <p><span class="highlight">완전히 달라져!</span></p>
                    <p>필터는 <strong>"무엇을 찾을 것인가"</strong>를 결정해.</p>
                </div>
            </div>

            <table class="compare-table">
                <tr>
                    <th>필터 종류</th>
                    <th>패턴</th>
                    <th>효과</th>
                </tr>
                <tr>
                    <td><strong>수직 엣지</strong></td>
                    <td>
                        [1, 0, -1]<br>
                        [1, 0, -1]<br>
                        [1, 0, -1]
                    </td>
                    <td>세로 선 강조</td>
                </tr>
                <tr>
                    <td><strong>수평 엣지</strong></td>
                    <td>
                        [1, 1, 1]<br>
                        [0, 0, 0]<br>
                        [-1, -1, -1]
                    </td>
                    <td>가로 선 강조</td>
                </tr>
                <tr>
                    <td><strong>블러</strong></td>
                    <td>
                        [1, 1, 1]<br>
                        [1, 1, 1]<br>
                        [1, 1, 1] ÷ 9
                    </td>
                    <td>부드럽게</td>
                </tr>
                <tr>
                    <td><strong>샤프닝</strong></td>
                    <td>
                        [0, -1, 0]<br>
                        [-1, 5, -1]<br>
                        [0, -1, 0]
                    </td>
                    <td>윤곽 선명하게</td>
                </tr>
            </table>

            <div class="chat">
                <div class="a">
                    <p>포토샵 필터도 다 이 원리야.</p>
                    <p>"엣지 검출", "블러", "샤프닝" - 전부 합성곱 연산이지.</p>
                </div>
            </div>
        </div>

        <!-- Part 4: 스트라이드와 패딩 -->
        <div class="conversation">
            <h2>Part 4. 스트라이드와 패딩</h2>

            <div class="chat">
                <div class="q">필터를 한 칸씩만 움직여야 돼?</div>
                <div class="a">
                    <p><span class="warning">아니. 몇 칸씩 건너뛸 수도 있어.</span></p>
                    <p>이걸 <strong>"스트라이드(Stride)"</strong>라고 해.</p>
                </div>
            </div>

            <div class="code-block">스트라이드 = 필터가 이동하는 칸 수

Stride = 1:
→ 한 칸씩 이동
→ 출력 이미지가 큼
→ 세밀한 특징 추출

Stride = 2:
→ 두 칸씩 건너뛰며 이동
→ 출력 이미지가 작아짐
→ 빠르지만 정보 손실


예시: 5×5 이미지, 3×3 필터

Stride 1 → 출력: 3×3
Stride 2 → 출력: 2×2</div>

            <div class="chat">
                <div class="q">그럼 이미지가 계속 작아지는데, 크기를 유지할 순 없어?</div>
                <div class="a">
                    <p><span class="key-point">패딩(Padding)을 쓰면 돼!</span></p>
                    <p>이미지 가장자리에 <strong>0을 추가</strong>하는 거야.</p>
                </div>
            </div>

            <div class="code-block">패딩 예시:

원본 (3×3):
[1, 2, 3]
[4, 5, 6]
[7, 8, 9]


패딩 1 적용 (5×5):
[0, 0, 0, 0, 0]
[0, 1, 2, 3, 0]
[0, 4, 5, 6, 0]
[0, 7, 8, 9, 0]
[0, 0, 0, 0, 0]

→ 이제 3×3 필터를 적용해도 원본 크기 유지 가능</div>

            <div class="chat">
                <div class="a">
                    <p><strong>Same Padding</strong> = 출력 크기 = 입력 크기</p>
                    <p><strong>Valid Padding</strong> = 패딩 없음 (출력이 작아짐)</p>
                </div>
            </div>
        </div>

        <!-- Part 5: 왜 합성곱을 쓸까? -->
        <div class="conversation">
            <h2>Part 5. 왜 이렇게 복잡한 걸 해?</h2>

            <div class="chat">
                <div class="q">그냥 전체 이미지를 한 번에 보면 안 돼?</div>
                <div class="a">
                    <p><span class="warning">그럼 파라미터가 너무 많아져.</span></p>
                </div>
            </div>

            <div class="code-block">비교:

일반 신경망 (전체 연결):
입력: 224×224×3 = 150,528개 픽셀
첫 번째 레이어 뉴런: 1000개

→ 파라미터 = 150,528 × 1000 = 1억 5천만 개!


CNN (합성곱):
필터: 3×3×3 = 27개
필터 개수: 64개

→ 파라미터 = 27 × 64 = 1,728개

차이 = 약 87,000배!</div>

            <div class="chat">
                <div class="a">
                    <p>합성곱의 장점:</p>
                    <p>1. <span class="key-point">파라미터 공유</span> - 하나의 필터를 전체 이미지에 재사용</p>
                    <p>2. <span class="key-point">국소적 패턴</span> - 가까운 픽셀끼리의 관계만 학습</p>
                    <p>3. <span class="key-point">위치 불변성</span> - 고양이가 어디 있든 찾을 수 있음</p>
                </div>
            </div>
        </div>

        <!-- Part 6: 실전 예시 -->
        <div class="conversation">
            <h2>Part 6. 실제로는 어떻게 쓰여?</h2>

            <div class="chat">
                <div class="q">실제 CNN에서는 어떻게 돼?</div>
                <div class="a">
                    <p>여러 개의 필터를 동시에 적용해.</p>
                </div>
            </div>

            <div class="code-block">실제 CNN 레이어:

입력: (224, 224, 3)

Conv Layer 1:
→ 64개의 3×3 필터 적용
→ 출력: (224, 224, 64)
→ 64개의 서로 다른 특징 맵 생성

Conv Layer 2:
→ 128개의 3×3 필터 적용
→ 출력: (112, 112, 128)  # 풀링으로 크기 축소
→ 128개의 특징 맵

...계속 반복</div>

            <div class="chat">
                <div class="a">
                    <p>각 필터는 <strong>자동으로 학습</strong>돼.</p>
                    <p>처음엔 무작위 값이었다가, 학습하면서:</p>
                    <p>→ 초반 레이어: 엣지, 코너 검출</p>
                    <p>→ 중반 레이어: 눈, 귀, 털 같은 부분 검출</p>
                    <p>→ 후반 레이어: 고양이 얼굴 전체 인식</p>
                </div>
            </div>
        </div>

        <!-- 핵심 정리 -->
        <div class="summary-box">
            <h3>핵심 정리</h3>
            <ul>
                <li><strong>합성곱 = 필터 슬라이딩</strong> - 작은 창을 이미지 위에서 움직이며 계산</li>
                <li><strong>필터 = 패턴 검출기</strong> - 엣지, 코너 등 특정 패턴을 찾음</li>
                <li><strong>스트라이드 = 이동 간격</strong> - 한 번에 몇 칸씩 이동할지</li>
                <li><strong>패딩 = 테두리 추가</strong> - 출력 크기 유지를 위해 0 추가</li>
                <li><strong>파라미터 효율적</strong> - 전체 연결보다 수만~수십만 배 적은 파라미터</li>
                <li><strong>특징 맵 생성</strong> - 원본 이미지에서 특징을 추출한 새 이미지</li>
            </ul>
        </div>

        <div class="nav-links">
            <a href="../topic03/">← 이전: 이미지는 몇 차원이야?</a>
            <a href="../topic05/">다음: CNN은 왜 이미지에 강해? →</a>
        </div>
    </div>
</body>
</html>
